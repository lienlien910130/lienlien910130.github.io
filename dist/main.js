(()=>{"use strict";window.addEventListener("load",(()=>{let e,t,n;liff.init({liffId:"1660857311-QDo3BLk3"}).then((()=>{let d,i,l,o,c,a;d=liff.getLanguage(),i=liff.getVersion(),l=liff.isInClient(),o=liff.isLoggedIn(),c=liff.getOS(),a=liff.getLineVersion(),document.getElementById("result-basic").value=`language: ${d}\nLIFF SDK version: ${i}\nisInClient: ${l}\nisLoggedIn: ${o}\nos: ${c}\nlineVersion: ${a}`,document.getElementById("login").addEventListener("click",(()=>{o||liff.login({redirectUri:"https://liff.line.me/1660857311-QDo3BLk3"})})),document.getElementById("logout").addEventListener("click",(()=>{o&&(liff.logout(),window.location.reload())})),document.getElementById("profile").addEventListener("click",(()=>{o&&liff.getProfile().then((e=>{document.getElementById("result-info").value=`${JSON.stringify(e)}`}))})),document.getElementById("getEmail").addEventListener("click",(()=>{const e=liff.getDecodedIDToken().email;document.getElementById("result-info").value=`${e}`})),document.getElementById("qrScan").addEventListener("click",(()=>{o&&liff.scanCode&&liff.scanCodeV2().then((d=>{document.getElementById("result-qr").value=d.value,fetch("https://1851255c-6a66-400a-8682-69454cae4f53.mock.pstmn.io/forum23/rsvp/api/qr-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:d.value})}).then((e=>e.json())).then((d=>{console.log(d);var i=document.getElementById("result-api");if(0==d.success)i.value="無效";else{var l=d.data;e=datd.checked,t=l.id,n=l.created;var o=datd.checked?"已檢查":"未檢查";i.value=`${o}\n id: ${t}\n姓名: ${l.name}\n手機: ${l.mobile}\n建立時間: ${l.created}`,e?i.value+=`\n檢查時間: ${l.checked}\n檢查人員: ${l.checked_by}`:(document.getElementById("appendButton").innerHTML='<input id="vid" /><input id="vcreated" /><button id="checkIn"></button>',document.getElementById("checkIn").addEventListener("click",(document.getElementById("vid").value=t,document.getElementById("vcreated").value=n,void fetch("https://1851255c-6a66-400a-8682-69454cae4f53.mock.pstmn.io/forum23/rsvp/api/check-in",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,created:n})}).then((e=>e.json())).then((e=>{document.getElementById("appendButton").innerHTML="<span>成功</span>"})).catch((e=>{console.log("錯誤:",e)})))))}})).catch((e=>{console.log("錯誤:",e)}))})).catch((e=>{document.getElementById("result-qr").value=e}))}))})).catch((e=>{console.log(e)}))}))})();