(()=>{"use strict";window.addEventListener("load",(()=>{let e,n,t;liff.init({liffId:"1660857311-QDo3BLk3"}).then((()=>{let i,l,a,d,o,c;i=liff.getLanguage(),l=liff.getVersion(),a=liff.isInClient(),d=liff.isLoggedIn(),o=liff.getOS(),c=liff.getLineVersion(),document.getElementById("result-basic").value=`語言: ${i}\nLIFF SDK Version: ${l}\nisInClient: ${a}\n是否登入: ${d}\n作業系統: ${o}\nLine Version: ${c}`,d||liff.login({redirectUri:"https://lienlien910130.github.io"}).then((()=>{liff.getProfile().then((e=>{const n=document.getElementById("result-info");n.value=`${JSON.stringify(e)}`;const t=liff.getDecodedIDToken().email;n.value+=`\nemail: ${t}`}))})),document.getElementById("qrScan").addEventListener("click",(()=>{d&&liff.scanCode&&liff.scanCodeV2().then((i=>{document.getElementById("result-qr").value=i.value,fetch("https://1851255c-6a66-400a-8682-69454cae4f53.mock.pstmn.io/forum23/rsvp/api/qr-verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:i.value})}).then((e=>e.json())).then((i=>{console.log(i);var l=document.getElementById("result-api");if(0==i.success)l.innerHTML="無效";else{e=!1!==i.data.checked,n=i.data.id,t=i.data.created;var a=e?"已檢查":"未檢查";l.innerHTML=`${a}\nid: ${n}\n姓名: ${i.data.name}\n手機: ${i.data.mobile}\n建立時間: ${t}`,e?l.innerHTML+=`\n檢查時間: ${i.data.checked}\n檢查人員: ${i.data.checked_by}`:document.getElementById("appendButton").innerHTML='<input id="vid" /><input id="vcreated" /><button id="checkIn">通關</button>'}})).catch((e=>{console.log("錯誤:",e)}))})).catch((e=>{document.getElementById("result-qr").value=e}))}))})).catch((e=>{console.log(e)}))}))})();